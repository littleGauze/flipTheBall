window.__require=function t(e,r,o){function n(l,a){if(!r[l]){if(!e[l]){var s=l.split("/");if(s=s[s.length-1],!e[s]){var c="function"==typeof __require&&__require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+l+"'")}l=s}var p=r[l]={exports:{}};e[l][0].call(p.exports,function(t){return n(e[l][1][t]||t)},p,p.exports,t,e,r,o)}return r[l].exports}for(var i="function"==typeof __require&&__require,l=0;l<o.length;l++)n(o[l]);return n}({ball:[function(t,e,r){"use strict";cc._RF.push(e,"e9273hHtD5GTp+8yZKVA2sC","ball");var o=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,l=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(l=(i<3?n(l):i>3?n(e,r,l):n(e,r))||l);return i>3&&l&&Object.defineProperty(e,r,l),l};Object.defineProperty(r,"__esModule",{value:!0});var i=t("./game"),l=cc._decorator,a=l.ccclass,s=l.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.balls=null,e.frames=[],e.sprite=null,e.level=1,e.idx=-1,e}return o(e,t),e.prototype.onLoad=function(){this.frames=this.balls.getSpriteFrames(),this.sprite=this.getComponent(cc.Sprite),this.node.on("touchstart",this.nextBall,this)},e.prototype.onDestroy=function(){this.node.off("touchstart",this.nextBall,this)},e.prototype.initBall=function(t){void 0===t&&(t=1),this.idx=-1,this.level=t,this.nextBall()},e.prototype.nextBall=function(){var t=this;if(!i.default.gameOver){var e=function(){var r=Math.floor(Math.random()*(t.level+1));return t.idx!==r?r:e()};this.idx=e(),this.sprite.spriteFrame=this.frames[this.idx]}},n([s(cc.SpriteAtlas)],e.prototype,"balls",void 0),e=n([a],e)}(cc.Component);r.default=c,cc._RF.pop()},{"./game":"game"}],game:[function(t,e,r){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","game");var o=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,l=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(l=(i<3?n(l):i>3?n(e,r,l):n(e,r))||l);return i>3&&l&&Object.defineProperty(e,r,l),l};Object.defineProperty(r,"__esModule",{value:!0});var i=cc._decorator,l=i.ccclass,a=i.property,s=t("./ball"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.ball=null,e.totalLevel=4,e.level=1,e.ballsPerLine=4,e.maxBalls=16,e.gameTime=30,e.nowTime=0,e.ballsContainer=[],e}var r;return o(e,t),r=e,e.prototype.onLoad=function(){this.init()},e.prototype.init=function(){r.gameOver=!1,this.level=1,this.nowTime=0,this.initMap()},e.prototype.restart=function(){cc.director.loadScene("game")},e.prototype.initMap=function(){for(var t=0,e=this.ballsPerLine*this.level;t<e;t++){var r=null,o=null;(o=this.ballsContainer[t])||(r=cc.instantiate(this.ball),this.node.addChild(r),o=r.getComponent(s.default),this.ballsContainer.push(o)),o.initBall(this.level)}},e.prototype.levelUp=function(){this.nowTime=0,this.level<this.totalLevel&&this.level++,this.initMap()},e.prototype.checkOver=function(){for(var t=-1,e=0,r=this.ballsContainer.length;e<r;e++)if(0===e&&(t=this.ballsContainer[e].idx),this.ballsContainer[e].idx!==t)return!1;return!0},e.prototype.update=function(t){var e=this;if(!r.gameOver){this.nowTime+=t;var o=Math.floor(this.gameTime-this.nowTime);if(this.label.string="Level: "+this.level+", "+o+"s left",o<=0)return r.gameOver=!0,this.label.string="Level: "+this.level+", GameOver!",void setTimeout(function(){return e.restart()},3e3);this.checkOver()&&this.levelUp()}},e.gameOver=!0,n([a(cc.Label)],e.prototype,"label",void 0),n([a(cc.Prefab)],e.prototype,"ball",void 0),e=r=n([l],e)}(cc.Component);r.default=c,cc._RF.pop()},{"./ball":"ball"}]},{},["ball","game"]);